<div class="h-full bg-gray-50 flex flex-col overflow-hidden">
  <!-- Header -->
  <header
    class="border-b-2 border-gray-200 header-blur absolute top-0 left-0 right-0 z-20 bg-white"
  >
    <div class="background"></div>
    <div class="background"></div>
    <div class="background"></div>
    <div class="max-w-md mx-auto px-4 py-3 flex justify-between items-center">
      <div class="flex-1 min-w-0 mr-4">
        <h1 class="text-2xl font-bold text-gray-900 truncate">
          <span class="text-blue-900">MeTI</span><span class="text-teal-500">Mat</span>
        </h1>
        <p class="text-sm text-gray-600 truncate">{{ 'app.subtitle' | transloco }}</p>
      </div>
      <div class="flex items-center space-x-1">
        @if (authService.isAdmin()) {
          <button
            (click)="goToAdmin()"
            class="h-10 w-10 flex items-center justify-center text-blue-900 hover:bg-gray-100 rounded-full transition-colors"
            aria-label="Admin"
          >
            <mat-icon style="width: 24px; height: 24px; font-size: 24px"
              >admin_panel_settings</mat-icon
            >
          </button>
        }
        <button
          (click)="logout()"
          class="h-10 flex items-center space-x-1 px-4 text-gray-600 hover:bg-gray-100 rounded-full transition-colors"
          aria-label="Logout"
        >
          <mat-icon style="width: 20px; height: 20px; font-size: 20px">logout</mat-icon>
          <span class="text-sm font-medium">Abmelden</span>
        </button>
      </div>
    </div>
  </header>

  <!-- Main Content Wrapper -->
  <div class="pt-14 max-w-md mx-auto w-full">
    <!-- Fixed Actions Area -->
    <div class="px-4 pt-2 pb-4 space-y-4">
      <!-- Start New Order Flow -->
      <div class="bg-white rounded-lg shadow-sm border-2 border-blue-900">
        <button
          (click)="startNewOrder()"
          class="w-full p-6 text-left flex items-center justify-between hover:bg-blue-50 transition-colors rounded-lg"
        >
          <div class="flex items-center">
            <div class="w-12 h-12 bg-blue-900 rounded-full flex items-center justify-center mr-4">
              <mat-icon class="text-white" style="width: 24px; height: 24px; font-size: 24px"
                >add</mat-icon
              >
            </div>
            <div>
              <h3 class="font-semibold text-gray-900">{{ 'home.startFlow' | transloco }}</h3>
              <p class="text-sm text-gray-600 mt-1">
                {{ 'home.importPrescription' | transloco }} /
                {{ 'home.searchMedication' | transloco }}
              </p>
            </div>
          </div>
          <mat-icon class="text-gray-400" style="width: 20px; height: 20px; font-size: 20px"
            >chevron_right</mat-icon
          >
        </button>
      </div>

      <!-- Additional Quick Actions Grid -->
      <div class="grid grid-cols-2 gap-4">
        <!-- My Orders -->
        <button
          (click)="viewMyOrders()"
          class="bg-white rounded-lg shadow-sm border-2 border-gray-200 p-4 hover:border-blue-900 hover:bg-blue-50 transition-all h-full"
        >
          <div class="flex flex-col items-center justify-center h-full text-center">
            <mat-icon class="text-blue-900 mb-2" style="width: 32px; height: 32px; font-size: 32px"
              >assignment</mat-icon
            >
            <span class="text-sm font-medium text-gray-900">{{
              'order.myOrders' | transloco
            }}</span>
          </div>
        </button>

        <!-- Show Locations (Map) -->
        <button
          (click)="showMachineLocations()"
          class="bg-white rounded-lg shadow-sm border-2 border-gray-200 p-4 hover:border-blue-900 hover:bg-blue-50 transition-all h-full"
        >
          <div class="flex flex-col items-center justify-center h-full text-center">
            <mat-icon class="text-blue-900 mb-2" style="width: 32px; height: 32px; font-size: 32px"
              >map</mat-icon
            >
            <span class="text-sm font-medium text-gray-900">Map View</span>
          </div>
        </button>
      </div>

      <!-- Instruction Info-Box -->
      <div class="bg-blue-50 rounded-xl border border-blue-100 p-5 shadow-sm">
        <div class="flex items-center gap-2 mb-3">
          <mat-icon class="text-blue-900" style="width: 24px; height: 24px; font-size: 24px"
            >info</mat-icon
          >
          <h4 class="font-bold text-blue-900">Kurzanleitung</h4>
        </div>
        <ul class="space-y-3">
          <li class="flex gap-3 text-sm text-blue-800">
            <span
              class="flex-none w-5 h-5 bg-blue-900 text-white rounded-full flex items-center justify-center text-[10px] font-bold"
              >1</span
            >
            <span>W채hle ein Medikament aus oder importiere ein E-Rezept.</span>
          </li>
          <li class="flex gap-3 text-sm text-blue-800">
            <span
              class="flex-none w-5 h-5 bg-blue-900 text-white rounded-full flex items-center justify-center text-[10px] font-bold"
              >2</span
            >
            <span>W채hle einen MeTIMat-Automaten in deiner N채he f체r die Abholung aus.</span>
          </li>
          <li class="flex gap-3 text-sm text-blue-800">
            <span
              class="flex-none w-5 h-5 bg-blue-900 text-white rounded-full flex items-center justify-center text-[10px] font-bold"
              >3</span
            >
            <span
              >Scanne den erhaltenen QR-Code direkt am Automaten, um deine Medikamente zu
              entnehmen.</span
            >
          </li>
        </ul>
      </div>
    </div>
  </div>
</div>
