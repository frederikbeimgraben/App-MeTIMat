<div class="h-full bg-gray-50 flex flex-col overflow-hidden">
  <!-- Header -->
  <header
    class="border-b-2 border-gray-200 header-blur absolute top-0 left-0 right-0 z-20 bg-white"
  >
    <div class="background"></div>
    <div class="background"></div>
    <div class="background"></div>
    <div class="max-w-md mx-auto px-4 py-3 flex justify-between items-center">
      <div class="flex-1 min-w-0 mr-4">
        <h1 class="text-2xl font-bold text-gray-900 truncate">
          <span class="text-blue-900">MeTI</span><span class="text-teal-500">Mat</span>
        </h1>
        <p class="text-sm text-gray-600 truncate">{{ 'app.subtitle' | transloco }}</p>
      </div>
      <div class="flex items-center space-x-1">
        @if (authService.isAdmin()) {
          <button
            (click)="goToScannerDemo()"
            class="h-10 w-10 flex items-center justify-center text-blue-900 hover:bg-gray-100 rounded-full transition-colors"
            title="Scanner Demo"
            aria-label="Scanner Demo"
          >
            <mat-icon style="width: 24px; height: 24px; font-size: 24px">qr_code_scanner</mat-icon>
          </button>
          <button
            (click)="goToAdmin()"
            class="h-10 w-10 flex items-center justify-center text-blue-900 hover:bg-gray-100 rounded-full transition-colors"
            aria-label="Admin"
          >
            <mat-icon style="width: 24px; height: 24px; font-size: 24px"
              >admin_panel_settings</mat-icon
            >
          </button>
        }
        <button
          (click)="logout()"
          class="h-10 flex items-center space-x-1 px-4 text-gray-600 hover:bg-gray-100 rounded-full transition-colors"
          aria-label="Logout"
        >
          <mat-icon style="width: 20px; height: 20px; font-size: 20px">logout</mat-icon>
          <span class="text-sm font-medium">Abmelden</span>
        </button>
      </div>
    </div>
  </header>

  <!-- Main Content Wrapper -->
  <div class="pt-14 max-w-md mx-auto w-full flex-1 flex flex-col">
    <!-- Fixed Actions Area -->
    <div class="px-4 pt-2 pb-4 space-y-4 flex-none">
      <!-- Start New Order Flow -->
      <div class="bg-white rounded-lg shadow-sm border-2 border-blue-900">
        <button
          (click)="startNewOrder()"
          class="w-full p-6 text-left flex items-center justify-between hover:bg-blue-50 transition-colors rounded-lg"
        >
          <div class="flex items-center">
            <div class="w-12 h-12 bg-blue-900 rounded-full flex items-center justify-center mr-4">
              <mat-icon class="text-white" style="width: 24px; height: 24px; font-size: 24px"
                >add</mat-icon
              >
            </div>
            <div>
              <h3 class="font-semibold text-gray-900">{{ 'home.startFlow' | transloco }}</h3>
              <p class="text-sm text-gray-600 mt-1">
                {{ 'home.importPrescription' | transloco }} /
                {{ 'home.searchMedication' | transloco }}
              </p>
            </div>
          </div>
          <mat-icon class="text-gray-400" style="width: 20px; height: 20px; font-size: 20px"
            >chevron_right</mat-icon
          >
        </button>
      </div>

      <!-- Additional Quick Actions Grid -->
      <div class="grid grid-cols-2 gap-4">
        <!-- My Orders -->
        <button
          (click)="viewMyOrders()"
          class="bg-white rounded-lg shadow-sm border-2 border-gray-200 p-4 hover:border-blue-900 hover:bg-blue-50 transition-all h-full"
        >
          <div class="flex flex-col items-center justify-center h-full text-center">
            <mat-icon class="text-blue-900 mb-2" style="width: 32px; height: 32px; font-size: 32px"
              >assignment</mat-icon
            >
            <span class="text-sm font-medium text-gray-900">{{
              'order.myOrders' | transloco
            }}</span>
          </div>
        </button>

        <!-- Show Locations (Map) -->
        <button
          (click)="showMachineLocations()"
          class="bg-white rounded-lg shadow-sm border-2 border-gray-200 p-4 hover:border-blue-900 hover:bg-blue-50 transition-all h-full"
        >
          <div class="flex flex-col items-center justify-center h-full text-center">
            <mat-icon class="text-blue-900 mb-2" style="width: 32px; height: 32px; font-size: 32px"
              >map</mat-icon
            >
            <span class="text-sm font-medium text-gray-900">Karte</span>
          </div>
        </button>
      </div>
    </div>

    <!-- Instruction Info-Box centered in remaining space -->
    <div class="flex-1 flex items-center justify-center px-4 pb-8">
      <div
        class="bg-white rounded-3xl border border-gray-100 p-8 shadow-xl shadow-blue-900/5 w-full relative overflow-hidden"
      >
        <!-- Decorative background element -->
        <div class="absolute -right-6 -top-6 w-32 h-32 bg-blue-50 rounded-full opacity-50"></div>

        <div class="relative">
          <div class="flex items-center gap-4 mb-8">
            <div class="w-12 h-12 bg-blue-50 rounded-2xl flex items-center justify-center">
              <mat-icon class="text-blue-900" style="width: 28px; height: 28px; font-size: 28px"
                >help_outline</mat-icon
              >
            </div>
            <div>
              <h4 class="font-black text-gray-900 text-xl tracking-tight">So einfach geht's</h4>
              <p class="text-xs text-gray-400 font-medium uppercase tracking-widest mt-0.5">
                4 einfache Schritte
              </p>
            </div>
          </div>

          <div class="space-y-6">
            <div class="flex gap-4">
              <div class="flex flex-col items-center">
                <span
                  class="flex-none w-7 h-7 bg-blue-900 text-white rounded-full flex items-center justify-center text-xs font-bold shadow-lg shadow-blue-900/30 z-10"
                  >1</span
                >
                <div class="flex-1 w-0.5 bg-gray-100 my-1"></div>
              </div>
              <div class="pb-1">
                <p class="text-sm font-bold text-gray-900">Bestellung starten</p>
                <p class="text-xs text-gray-500 mt-1 leading-relaxed">
                  Klicke oben auf
                  <span class="text-blue-900 font-bold">"Neue Bestellung starten"</span>.
                </p>
              </div>
            </div>

            <div class="flex gap-4">
              <div class="flex flex-col items-center">
                <span
                  class="flex-none w-7 h-7 bg-blue-100 text-blue-900 rounded-full flex items-center justify-center text-xs font-bold z-10"
                  >2</span
                >
                <div class="flex-1 w-0.5 bg-gray-100 my-1"></div>
              </div>
              <div class="pb-1">
                <p class="text-sm font-bold text-gray-900">Produkte wählen</p>
                <p class="text-xs text-gray-500 mt-1 leading-relaxed">
                  Scanne dein <span class="font-semibold text-gray-700">E-Rezept</span> oder suche
                  ein Medikament aus dem Sortiment.
                </p>
              </div>
            </div>

            <div class="flex gap-4">
              <div class="flex flex-col items-center">
                <span
                  class="flex-none w-7 h-7 bg-blue-100 text-blue-900 rounded-full flex items-center justify-center text-xs font-bold z-10"
                  >3</span
                >
                <div class="flex-1 w-0.5 bg-gray-100 my-1"></div>
              </div>
              <div class="pb-1">
                <p class="text-sm font-bold text-gray-900">Abholort festlegen</p>
                <p class="text-xs text-gray-500 mt-1 leading-relaxed">
                  Wähle einen MeTIMat-Automaten in deiner Nähe und schließe die Bestellung ab.
                </p>
              </div>
            </div>

            <div class="flex gap-4">
              <div class="flex flex-col items-center">
                <span
                  class="flex-none w-7 h-7 bg-blue-100 text-blue-900 rounded-full flex items-center justify-center text-xs font-bold z-10"
                  >4</span
                >
              </div>
              <div>
                <p class="text-sm font-bold text-gray-900">Abholung</p>
                <p class="text-xs text-gray-500 mt-1 leading-relaxed">
                  Scanne den erhaltenen
                  <span class="font-semibold text-gray-700">QR-Code</span> direkt am Automaten zur
                  Ausgabe.
                </p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
